Table of contents

- [PROJECT : eventhubserver](#project--eventhubserver)
  - [About The Project](#about-the-project)
  - [Documentation and Demonstration](#documentation-and-demonstration)
  - [Build with](#build-with)
    - [Versions used for the development](#versions-used-for-the-development)
- [GETTING STARTED](#getting-started)
  - [1. RUNNING LOCALLY](#1-running-locally)
    - [Installation \& running](#installation--running)
    - [Database configuration](#database-configuration)
- [Few usefull commands](#few-usefull-commands)
- [REST API documentation, monitoring and testing](#rest-api-documentation-monitoring-and-testing)
  - [Spring REST Docs (API testing and documentation)](#spring-rest-docs-api-testing-and-documentation)
    - [How to generate the API documentation](#how-to-generate-the-api-documentation)
      - [Troubleshooting](#troubleshooting)
  - [Hal explorer (REST API documentation)](#hal-explorer-rest-api-documentation)
  - [Actuator (monitoring/observability)](#actuator-monitoringobservability)
  - [](#)
- [Mapstruct implementation](#mapstruct-implementation)



---

# PROJECT : eventhubserver

## About The Project

EventHub is a ticket office website. The primary goal of EventHub is to facilitate the management and sale of tickets for events by providing an interface for venue managers and end-users. On one side, professionals can manage events, venues, sessions, and pricing. On the other, the general public can view shows, make reservations, and purchase tickets.
Main features are :

- eventhub-site : a user interface visible to users (both the public and managers) for interacting with the application.
- eventhub-server : REST API to manage the data. It contains the business logic, such as data processing, event management, venue management, reservations, and more.

## Documentation and Demonstration

- [General Documentation of the project](https://github.com/vifeng/TicketToTheMoon/tree/main/documentation) - such as functional requirements, database... mainly in french  
- [A wiki](https://github.com/vifeng/TicketToTheMoon/wiki) presents : 
  - [a slideshow presentation for the application](https://github.com/vifeng/TicketToTheMoon/wiki#:~:text=A%20slideshow%20presentation%20for%20the%20application)
  - a demonstration of the application ([video link](https://youtu.be/vzKp5uuW_zM) and [commands to run the app](https://github.com/vifeng/TicketToTheMoon/wiki#:~:text=Commands%20of%20the%20backend%20demonstration))
  - the development process notes

## Build with

### Versions used for the development

This project is built with the following versions (subject to change):
- Gradle 8.2.1
- Java 17.0.11
- Kotlin 1.8.20
- SpringBoot 3.2.3
- Junit 5.8.1

---

# GETTING STARTED

## 1. RUNNING LOCALLY

### Installation & running

clone the project

```sh
git clone https://github.com/vifeng/tickettothemoon.git
cd event-hub-server
```

run the project
```sh
./gradlew bootRun
# run the app
```

Access to the Application endpoints. For the EVENTS endpoint go to [http://localhost:8080/api/events](http://localhost:8080/api/events) in your browser.

Access to the HAL explorer at [http://localhost:8080/](http://localhost:8080/) in your browser.
Access to the actuator at [http://localhost:8080/actuator](http://localhost:8080/manage/actuator) in your browser.
Access to the H2 console at [http://localhost:8080/h2-console](http://localhost:8080/h2-console) in your browser. 

### Database configuration

In development environnement I have use the in memory database H2. Once the application is up and running, visit the [h2-console](http://localhost:8080/h2-console) in your browser.
Connect to the database with the credentials which are in the [application-dev.yml](src/main/resources/application-dev.yml) file.
</br>

---
# Few usefull commands

```sh
./gradlew bootRun
# run the application
./gradlew build
# build the app and generate documentation
./gradlew build -x test
# Build without the tests
CTL+C
# Shutdown the front or backend from the terminal
./gradlew wrapper --gradle-version  8.1.1
# update gradle wrapper version
./gradlew clean
# clean the build folder
./gradlew clearAll
# A custom task to delete all the files and folders generated by Gradle
./gradlew clean build
# clean the build folder and build the project. recompile the code and execute the Test.
./gradlew check
# run all verification tasks, including tests and linting
./gradlew spotlessApply
# apply the linting rules
```

<br>

---

# REST API documentation, monitoring and testing

## Spring REST Docs (API testing and documentation)

Spring REST Docs helps you to document RESTful services. It combines hand-written documentation written with Asciidoctor and auto-generated snippets produced with Spring MVC Test. The tests are using MockMvc to mock the HTTP requests and they also generate documentation for the API in the [./build/generated-snippets](./build/generated-snippets) file ensuring an uptodate documentation (or non at all !).

### How to generate the API documentation

The task ascidoctor (which depends on test) is implemented in the build.gradle.kts file. You can generate the documentation with the following command. The documentation will be available in the [./build/docs/asciidoc](./build/docs/asciidoc) folder.

run one of the following commands:
```sh
./gradlew build
# build the project and generate the documentation
./gradlew asciidoctor
# generate the documentation
./gradlew test
# run the tests and generate the documentation
```
Access to the API documentation at [http://localhost:8080/api](http://localhost:8080/api) in your browser.

or just run the 'tests and debug' in vscode if the app is launched (`./gradlew bootRun`).

#### Troubleshooting

Sometimes the application may not build because the linting task is failing. 
If you encounter this issue, you can run the following commands:

```sh
./gradlew spotlessApply
# apply the linting rules
./gradlew check
# run all verification tasks, including tests and linting
./gradlew build
# build the project and generate the documentation
```
## Hal explorer (REST API documentation)

With HAL Explorer you can explore HAL and HAL-FORMS based RESTful Hypermedia APIs.

Available at [http://localhost:8080/](http://localhost:8080/)

Documentation at [github usage doc](https://toedter.github.io/hal-explorer/release/reference-doc/#usage)

## Actuator (monitoring/observability)

The spring-boot-actuator module provides all of Spring Bootâ€™s production-ready features. It exposes a lot of endpoints to monitor and manage your application. Auditing, health, and metrics gathering can also be automatically applied to your application.

- There are actuator health check and info routes as well:
  - http://localhost:8080/actuator
  - http://localhost:8080/actuator/health

source [official doc](https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html)

<br>
---

# Mapstruct implementation

Mapstruct is a code generator that simplifies the implementation of mappings between Java bean types by generating mapping code at compile time, following a convention-over-configuration approach.
the genereated code is in the `build/generated/sources/annotationProcessor/java/main` folder.

<br>
