Table of contents

- [PROJECT : TicketToTheMoon_BackEnd](#project--tickettothemoon_backend)
  - [About The Project](#about-the-project)
  - [Documentation](#documentation)
  - [Build with](#build-with)
    - [Versions used for the development](#versions-used-for-the-development)
- [GETTING STARTED](#getting-started)
  - [1. RUNNING LOCALLY](#1-running-locally)
    - [Installation \& running](#installation--running)
    - [Database configuration](#database-configuration)
- [Few usefull commands](#few-usefull-commands)
- [REST API documentation, monitoring and testing](#rest-api-documentation-monitoring-and-testing)
  - [Actuator (monitoring/observability)](#actuator-monitoringobservability)
  - [Hal explorer (REST API documentation)](#hal-explorer-rest-api-documentation)
- [Spring REST Docs (API testing and documentation)](#spring-rest-docs-api-testing-and-documentation)
  - [How to generate the documentation](#how-to-generate-the-documentation)

---

---

# PROJECT : TicketToTheMoon_BackEnd

## About The Project

TicketToTheMoon is a ticket office website. Main features are :

- tickettothemoon_FrontEnd : a front office aimed at the public to buy tickets from and a back office for venues to operate their shows.
- tickettothemoon_BackEnd : REST API to manage the data.

## Documentation

[Documentation] https://github.com/vifeng/TicketToTheMoon/tree/main/documentation  
README files are available in each folder to explain its purpose.

## Build with

### Versions used for the development

- Gradle 8.0.2
- Java 17.0.2
- Kotlin 1.8.10

# GETTING STARTED

## 1. RUNNING LOCALLY

### Installation & running

clone the project

```
   git clone https://github.com/vifeng/tickettothemoon.git
```

Backend

```sh
   cd tickettothemoon_BackEnd
   gradle bootRun
```

Access to the backend API [http://localhost:8080/api](http://localhost:8080/api) in your browser.

### Database configuration

I have use the in memory database H2 for the moment. Once the application is up and running, visit the [h2-console](http://localhost:8080/h2-console) in your browser.
Connect to the database with the credentials which are in the [application.properties](src/main/resources/application.properties) file.
</br>

# Few usefull commands

```sh
gradle bootRun
# run the application
gradle build -x test
# Build without the tests
CTL+C
# Shutdown the front or backend from the terminal
./gradlew wrapper --gradle-version  8.1.1
# update gradle wrapper version
gradle clean
# clean the build folder
gradle clearAll
# A custom task to delete all the files and folders generated by Gradle
gradle clean build
# clean the build folder and build the project. recompile the code and execute the Test.
gradle check
# run all verification tasks, including tests and linting

# MAPSTRUCT
# I have added these commands for convenience. But you don't need them since I have added a task to the build.gradle file, so that the mapstruct implementation is generated automatically, when you run `gradle bootRun`.
gradle mapstructGenerate
# generate the mapstruct implementation
gradle mapstructClean
# clean the mapstruct implementation
gradle mapstruct
# clean and generate the mapstruct implementation
gradle mapstructCompile
# compile the mapstruct implementation


```

<br>

---

# REST API documentation, monitoring and testing

## Actuator (monitoring/observability)

The spring-boot-actuator module provides all of Spring Bootâ€™s production-ready features. It exposes a lot of endpoints to monitor and manage your application. Auditing, health, and metrics gathering can also be automatically applied to your application.

- There are actuator health check and info routes as well:
  - http://localhost:8080/manage/actuator
  - http://localhost:8080/manage/actuator/health

source [official doc](https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html)

<br>

## Hal explorer (REST API documentation)

With HAL Explorer you can explore HAL and HAL-FORMS based RESTful Hypermedia APIs.

Available at [http://localhost:8080/](http://localhost:8080/)

Documentation at [github usage doc](https://toedter.github.io/hal-explorer/release/reference-doc/#usage)

# Spring REST Docs (API testing and documentation)

Spring REST Docs helps you to document RESTful services. It combines hand-written documentation written with Asciidoctor and auto-generated snippets produced with Spring MVC Test.

EmployeeControllerTest and VenueControllerTest are testing the controllers. They are using MockMvc to mock the HTTP requests and they also generate documentation for the API in the [./build/generated-snippets](./build/generated-snippets).

### How to generate the documentation

```sh
gradle clean build
```

or just run the 'tests and debug' in vscode if the app is launched (`gradle bootRun`).
